<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cat√°logo de M√∫sicas - NeoKaraoke</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Poppins', 'sans-serif'],
          },
          colors: {
            neonPurple: '#a855f7',
            neonBlue: '#3b82f6',
            glass: 'rgba(30, 41, 59, 0.7)',
          }
        }
      }
    }
  </script>
  <style>
    body {
      background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 100%);
      background-attachment: fixed;
    }

    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #0f172a;
    }

    ::-webkit-scrollbar-thumb {
      background: #4c1d95;
      border-radius: 4px;
    }
  </style>
</head>

<body class="text-white flex flex-col items-center min-h-screen p-4">

  <div class="w-full max-w-2xl flex flex-col items-center">

    <div class="relative group mb-8 mt-6">
      <div
        class="absolute -inset-1 bg-gradient-to-r from-neonPurple to-neonBlue rounded-full blur opacity-25 group-hover:opacity-50 transition duration-1000 group-hover:duration-200">
      </div>
      <img src="image.png" alt="NeoKaraoke Logo" class="relative w-40 h-40 object-contain drop-shadow-2xl">
    </div>

    <h1 class="text-3xl font-bold mb-8 text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-blue-400">
      Cat√°logo de M√∫sicas
    </h1>

    <div class="w-full flex flex-col sm:flex-row gap-3 mb-4 relative z-10">
      <input type="text" id="searchInput" placeholder="Digite m√∫sica ou artista..."
        class="flex-grow p-4 rounded-xl border border-white/10 bg-white/5 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-neonPurple focus:border-transparent focus:bg-white/10 transition shadow-lg backdrop-blur-sm">
      <button id="searchButton"
        class="bg-gradient-to-r from-purple-600 to-blue-600 text-white font-semibold py-4 px-8 rounded-xl hover:scale-105 hover:shadow-[0_0_20px_rgba(168,85,247,0.5)] transition duration-300 ease-in-out transform active:scale-95">
        üîç Pesquisar
      </button>
    </div>

    <div class="w-full flex justify-center mb-8 relative z-10">
      <button id="showAllButton"
        class="text-sm text-gray-400 hover:text-white border border-white/10 bg-white/5 hover:bg-white/10 px-6 py-2 rounded-full transition-all duration-300">
        üìú Lista Completa
      </button>
    </div>

    <div id="results"
      class="w-full bg-glass backdrop-blur-md rounded-2xl shadow-2xl p-6 hidden border border-white/10 mb-6">
      <h2 class="text-xl font-semibold mb-4 text-purple-300 border-b border-white/10 pb-2 flex items-center gap-2">
        üéµ M√∫sicas Encontradas
      </h2>
      <ul id="resultsList" class="space-y-3 max-h-[60vh] overflow-y-auto pr-2">
      </ul>
    </div>


    <footer class="mt-10 text-gray-500 text-sm mb-4">
      &copy; 2025 NeoKaraoke 360RJ
    </footer>

    <!-- Bot√£o Voltar ao Topo -->
    <button id="scrollTopBtn"
      class="fixed bottom-8 right-8 bg-gradient-to-r from-neonPurple to-neonBlue text-white p-4 rounded-full shadow-lg hidden hover:scale-110 transition transform duration-300 z-50">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
      </svg>
    </button>

  </div>

  <script>
    function removeAccents(str) {
      return str.normalize('NFD').replace(/[\u0300-\u036f]/g, '');
    }

    let cachedSongs = null;

    async function getSongs() {
      if (cachedSongs) return cachedSongs;
      try {
        // Certifique-se que o arquivo 'dados.json' est√° na mesma pasta
        const response = await fetch('dados.json');
        if (!response.ok) throw new Error('Erro ao carregar o arquivo JSON');
        cachedSongs = await response.json();
        return cachedSongs;
      } catch (error) {
        console.error('Erro:', error);
        return [];
      }
    }

    function renderResults(songs) {
      const resultsList = document.getElementById('resultsList');
      const resultsContainer = document.getElementById('results');
      resultsList.innerHTML = '';

      if (songs.length > 0) {
        songs.forEach(song => {
          const li = document.createElement('li');
          // Estilo SIMPLES
          li.className = "flex items-center bg-white/5 p-3 rounded-lg border-l-4 border-neonPurple text-gray-200 select-text";
          li.innerHTML = `<span class="font-medium text-sm sm:text-base break-words leading-snug">${song}</span>`;
          resultsList.appendChild(li);
        });
        resultsContainer.classList.remove('hidden');
        resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
      } else {
        resultsList.innerHTML = `
                        <li class="flex flex-col items-center gap-3 text-center p-6 text-gray-400 bg-white/5 rounded-lg border border-white/10">
                            <span class="text-lg">üòï Nenhuma m√∫sica encontrada.</span>
                        </li>`;
        resultsContainer.classList.remove('hidden');
      }
    }

    async function searchSongs() {
      const query = document.getElementById('searchInput').value.trim().toLowerCase();
      const resultsContainer = document.getElementById('results');

      if (query.length < 3) {
        resultsContainer.classList.add('hidden');
        return;
      }

      const songs = await getSongs();
      if (!songs || !songs.length) {
        const resultsList = document.getElementById('resultsList');
        resultsList.innerHTML = '<li class="text-red-400 text-center">Erro ao buscar m√∫sicas.</li>';
        resultsContainer.classList.remove('hidden');
        return;
      }

      const normalizedQuery = removeAccents(query);
      const filteredSongs = songs.filter(song =>
        removeAccents(song.toLowerCase()).includes(normalizedQuery)
      );

      renderResults(filteredSongs);
    }

    async function showAllSongs() {
      const btn = document.getElementById('showAllButton');
      const originalText = btn.innerText;
      btn.innerText = "‚è≥ Carregando...";

      const songs = await getSongs();
      btn.innerText = originalText;

      if (songs && songs.length) {
        renderResults(songs);
      } else {
        const resultsList = document.getElementById('resultsList');
        const resultsContainer = document.getElementById('results');
        resultsList.innerHTML = '<li class="text-red-400 text-center">Erro ao buscar m√∫sicas.</li>';
        resultsContainer.classList.remove('hidden');
      }
    }

    // Eventos
    document.getElementById('searchButton').addEventListener('click', searchSongs);

    // Instant Search
    document.getElementById('searchInput').addEventListener('input', searchSongs);

    // Full List
    document.getElementById('showAllButton').addEventListener('click', showAllSongs);

    // Scroll to Top Logic
    const scrollTopBtn = document.getElementById('scrollTopBtn');

    window.addEventListener('scroll', () => {
      if (window.scrollY > 300) {
        scrollTopBtn.classList.remove('hidden');
      } else {
        scrollTopBtn.classList.add('hidden');
      }
    });

    scrollTopBtn.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

  </script>
</body>

</html>
